cl() {
    if [ -z "$(whence cl.exe)" ]; then
        echo "cl.exe is not in PATH, did you run the vs(64) script?"
        return
    fi

    if [ x$1 = x ]; then
        input=$(mktemp /tmp/XXXXXX.cpp)
        cat /dev/stdin > $input
    else
        input=$1
    fi

    obj=${input:t:r}.obj
    exe=${input:t:r}.exe

    cl.exe /EHsc- /nologo $input(+cyg) | sed '1d'
    [ -f ./$exe ] && ./$exe

    rm -f $obj $exe

    if [ x$1 = x ]; then
        rm $input
    fi
}

pbcopy () {
    cat > /dev/clipboard
}

pbpaste () {
    cat /dev/clipboard
}
