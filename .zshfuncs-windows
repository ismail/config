cl() {
    if [ -z "$(whence cl.exe)" ]; then
        echo "cl.exe is not in PATH, did you run the vs(64) script?"
        return
    fi

    if [ x$1 = x ]; then
        input=$(mktemp /tmp/XXXXXX.cpp)
        cat /dev/stdin > $input
    else
        input=$1
    fi

    obj=${input:t:r}.obj
    exe=${input:t:r}.exe

    cl.exe /EHsc- /nologo $input(+cyg) | sed '1d'
    [ -f ./$exe ] && ./$exe

    rm -f $obj $exe

    if [ x$1 = x ]; then
        rm $input
    fi
}

download_llvm64 () {
    rev=$(curl -s https://api.bintray.com/packages/ismail/llvm/llvm-win64 | jq ".latest_version" | sed s,'"',,g)
    download https://bintray.com/artifact/download/ismail/llvm/LLVM-$rev-win64.exe
    chmod +x LLVM-$rev-win64.exe
}

pbcopy () {
    cat > /dev/clipboard
}

pbpaste () {
    cat /dev/clipboard
}
