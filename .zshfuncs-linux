browser () {
    f=$(mktemp --suffix=.html)
    cat /dev/stdin > $f
    xdg-open $f &> /dev/null
}

distro () {
    if [ -e /etc/SUSE-brand ]; then
        echo "SUSE"
    elif [ -e /etc/debian_version ]; then
        echo "DEBIAN"
    elif [ -e /etc/redhat-release ]; then
        echo "REDHAT"
    fi
}

find-broken-symlinks () {
    find -L $1 -type l -exec ls -lF --color=yes '{}' +
}

ftrace () {
    strace -f -e trace=file $@
}

installpkg () {
    dist=$(distro)
    case $dist in
        SUSE)
            sudo zypper in "$@"
            ;;
        DEBIAN)
            sudo apt-get install "$@"
            ;;
        REDHAT)
            sudo yum install "$@"
            ;;
    esac
}

refresh-gpg-agent-tty {
    gpg-connect-agent <<< "UPDATESTARTUPTTY" > /dev/null
}

removepkg () {
    dist=$(distro)
    case $dist in
        SUSE)
            sudo zypper rm "$@"
            ;;
        DEBIAN)
            sudo apt-get --purge remove "$@"
            ;;
        REDHAT)
            sudo yum remove "$@"
            ;;
    esac
}

searchpkg () {
    dist=$(distro)
    case $dist in
        SUSE)
            sudo zypper search "$@"
            ;;
        DEBIAN)
            sudo apt-cache search "$@"
            ;;
        REDHAT)
            sudo yum search "$@"
            ;;
    esac
}

upup () {
    dist=$(distro)
    case $dist in
        SUSE)
            sudo zypper ref && sudo zypper dup --auto-agree-with-licenses
            ;;
        DEBIAN)
            sudo apt-get update && sudo apt-get dist-upgrade
            ;;
        REDHAT)
            sudo yum update
            ;;
    esac
}

function workon {
    if [[ -z $VENV_DIR ]]; then
        echo "Please set the VENV_DIR variable."
        return
    elif [[ -z $1 ]]; then
        echo "Usage: workon <virtualenvname>"
        return
    elif [[ ! -d $VENV_DIR/$1 ]]; then
        echo "No virtual environment named $1"
        return
    fi

    source $VENV_DIR/$1/bin/activate
}
