browser () {
    f=$(mktemp --suffix=.html)
    cat /dev/stdin > $f
    xdg-open $f &> /dev/null
}

catenv () {
    if [ ! -z $1 ]; then
        sudo cat /proc/$1/environ | xargs --null --max-args=1 | sort
    else
        echo "Pass a PID parameter."
    fi
}

disable-alsr () {
    echo 0 | sudo tee -a /proc/sys/kernel/randomize_va_space
}

distro () {
    if [ -e /etc/SUSE-brand ]; then
        echo "SUSE"
    elif [ -e /etc/debian_version ]; then
        echo "DEBIAN"
    elif [ -e /etc/redhat-release ]; then
        echo "REDHAT"
    fi
}

drop-caches () {
    echo 3 | sudo tee -a /proc/sys/vm/drop_caches
}

entropy () {
    echo $(cat /proc/sys/kernel/random/entropy_avail)/$(cat /proc/sys/kernel/random/poolsize)
}

find-broken-symlinks () {
    find -L $1 -type l -exec ls -lF --color=yes '{}' +
}

ftrace () {
    strace -f -e trace=file $@
}

installpkg () {
    dist=$(distro)
    case $dist in
        SUSE)
            sudo zypper in "$@"
            ;;
        DEBIAN)
            sudo apt-get install "$@"
            ;;
        REDHAT)
            sudo yum install "$@"
            ;;
    esac
}

restart () {
    sudo systemctl restart $1
    sleep 1
    sudo systemctl status $1 -l
}

removepkg () {
    dist=$(distro)
    case $dist in
        SUSE)
            sudo zypper rm "$@"
            ;;
        DEBIAN)
            sudo apt-get --purge remove "$@"
            ;;
        REDHAT)
            sudo yum remove "$@"
            ;;
    esac
}

searchpkg () {
    dist=$(distro)
    case $dist in
        SUSE)
            sudo zypper search "$@"
            ;;
        DEBIAN)
            sudo apt-cache search "$@"
            ;;
        REDHAT)
            sudo yum search "$@"
            ;;
    esac
}

start() {
    sudo systemctl start $1
    sleep 1
    sudo systemctl status $1 -l
}

status () {
    sudo systemctl status $1 -l
}

stop () {
    sudo systemctl stop $1
    sleep 1
    sudo systemctl status $1 -l
}

upup () {
    dist=$(distro)
    case $dist in
        SUSE)
            sudo zypper ref && sudo zypper dup --auto-agree-with-licenses
            ;;
        DEBIAN)
            sudo apt-get update && sudo apt-get dist-upgrade
            ;;
        REDHAT)
            sudo yum update
            ;;
    esac
}
